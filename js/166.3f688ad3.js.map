{"version":3,"file":"js/166.3f688ad3.js","mappings":"mMAkDOA,MAAM,iCAAiCC,IAAI,qBAAqBC,MAAA,yB,GAlDvEC,IAAA,EAsDwCH,MAAM,4C,GACjCA,MAAM,sF,GACJA,MAAM,wC,GAGNA,MAAM,4B,GA3DrBG,IAAA,EAiEkBH,MAAM,S,GACXA,MAAM,8C,GACJA,MAAM,yB,GAGNA,MAAM,mC,0CApBnBI,EAAAA,EAAAA,IA2BM,MA3BNC,EA2BM,gBAzBJD,EAAAA,EAAAA,IAwBME,EAAAA,GAAA,MA5EVC,EAAAA,EAAAA,IAoD+CC,EAAAC,eAARC,K,WAAnCN,EAAAA,EAAAA,IAwBM,OAxBDJ,MAAM,iBAAgDG,IAAKO,EAAKC,Q,CAExDD,EAAKE,QAAUJ,EAAAK,SAAM,WAAhCT,EAAAA,EAAAA,IASM,MATNU,EASM,EARJC,EAAAA,EAAAA,GAOM,MAPNC,EAOM,EANJD,EAAAA,EAAAA,GAEM,MAFNE,EAEM,EADJF,EAAAA,EAAAA,GAAoB,UAAAG,EAAAA,EAAAA,IAAfR,EAAKS,MAAI,MAEhBJ,EAAAA,EAAAA,GAEM,MAFNK,EAEM,EADJL,EAAAA,EAAAA,GAAmB,UAAAG,EAAAA,EAAAA,IAAdR,EAAKW,KAAG,uBAKnBjB,EAAAA,EAAAA,IASM,MATNkB,EASM,EARJP,EAAAA,EAAAA,GAOM,MAPNQ,EAOM,EANJR,EAAAA,EAAAA,GAEM,MAFNS,EAEM,EADJT,EAAAA,EAAAA,GAAmB,UAAAG,EAAAA,EAAAA,IAAdR,EAAKW,KAAG,MAEfN,EAAAA,EAAAA,GAEM,MAFNU,EAEM,EADJV,EAAAA,EAAAA,GAAoB,UAAAG,EAAAA,EAAAA,IAAfR,EAAKS,MAAI,e,8CAlE1B,GACEO,KAAAA,GAEE,MAAMC,GAAWC,EAAAA,EAAAA,MACX,OAAEf,EAAM,SAAEgB,EAAQ,cAAEpB,IAAiBqB,EAAAA,EAAAA,IAAYH,IACjD,iBAAEI,EAAgB,cAAEC,GAAkBL,EAGtCM,GAAqBhC,EAAAA,EAAAA,IAAI,MAEzBiC,EAAiBA,KACjBD,EAAmBE,QACrBF,EAAmBE,MAAMC,UAAYH,EAAmBE,MAAME,aAC9DC,IACF,EAGIA,EAAsBA,KACtBL,EAAmBE,QACrBF,EAAmBE,MAAMC,UAAYH,EAAmBE,MAAME,aAChE,EAcF,OAXAE,EAAAA,EAAAA,IAAO9B,GAAgB,KACrByB,GAAgB,KAGlBM,EAAAA,EAAAA,KAAU,KACR3B,EAAOsB,MAAQM,aAAaC,QAAQ,UACpCb,EAASM,OAAQQ,EAAAA,EAAAA,MAAqBC,MAAMC,OAAOC,MAAMjB,SACzDE,IACAC,GAAe,IAGX,CACJC,qBACApB,SACAgB,WACApB,gBAEJ,G,UCtCF,MAAMsC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://vue-hangout/./src/views/ChatRoom/ChatRoomTarget.vue","webpack://vue-hangout/./src/views/ChatRoom/ChatRoomTarget.vue?1e63"],"sourcesContent":["<script>\nimport { ref, onMounted, getCurrentInstance, watch } from 'vue';\nimport chatRoomStore from '../../stores/chatRoomStore';\nimport { storeToRefs } from 'pinia';\n\nexport default {\n  setup(){\n    //聊天室內容\n    const chatRoom = chatRoomStore();\n    const { userId, targetId, renderMsgData} = storeToRefs(chatRoom)\n    const { getTargetRoomMsg, getTargetInfo } = chatRoom;\n\n    //滾動條保持在最底部\n    const scrollBtmContainer = ref(null);\n\n    const scrollToBottom = () => {\n      if (scrollBtmContainer.value) {\n        scrollBtmContainer.value.scrollTop = scrollBtmContainer.value.scrollHeight;\n        scrollToBottomAgain();\n      }\n    };\n\n    const scrollToBottomAgain = () => {\n      if (scrollBtmContainer.value) {\n        scrollBtmContainer.value.scrollTop = scrollBtmContainer.value.scrollHeight;\n      }\n    };\n    \n    watch( renderMsgData , ()=>{\n      scrollToBottom();\n    })\n\n    onMounted(()=>{\n      userId.value = localStorage.getItem(\"userId\");\n      targetId.value = getCurrentInstance().proxy.$route.query.targetId;\n      getTargetRoomMsg();\n      getTargetInfo();\n    })\n\n    return{\n      scrollBtmContainer,\n      userId,\n      targetId,\n      renderMsgData\n    }\n  }\n}\n</script>\n\n<template >\n  <div class=\"chatRoomArea pt-3 px-2 px-lg-4\" ref=\"scrollBtmContainer\" style=\"overflow-y: scroll\">\n    <!-- 如果是自己傳的，在右側 -->\n    <div class=\"row w-100 gx-0\" v-for=\"item in renderMsgData\" :key=\"item.msgKey\">\n      \n      <div v-if=\"item.sender == userId\" class=\"d-flex justify-content-end ms-auto col-8\">\n        <div class=\"d-flex flex-column-reverse flex-lg-row align-items-end justify-content-lg-end mb-5\">\n          <div class=\"timeArea d-flex align-items-end me-2\">\n            <p>{{item.time}}</p>\n          </div>\n          <div class=\"msgArea bg-hangout-block\">\n            <p>{{item.msg}}</p>\n          </div>\n        </div>\n      </div>\n      \n      <div v-else class=\"col-8\">\n        <div class=\"d-inline-flex flex-column flex-lg-row mb-5\">\n          <div class=\"msgArea bg-white me-2\">\n            <p>{{item.msg}}</p>\n          </div>\n          <div class=\"timeArea d-flex align-items-end \">\n            <p>{{item.time}}</p>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>  \n</template>\n\n<style lang=\"scss\" scoped>\n  @import \"../../assets/main\";\n\n  .chatRoomArea{\n    //訊息視窗的高度\n    //需扣除header跟footer的高度最外層才不會有捲軸，並且完整顯示內容不被擋住\n    //pc以下 66px 54px 共120\n    //pc 90px 80px 共170\n\n    // 輸入框\n    // pc以下 70px\n    // pc  100px\n    height:calc(100vh - 190px); \n    @include pc{\n        height:calc(100vh - 270px);\n    }\n  }\n\n  .msgArea{\n    border: 1px solid $hangout-text;\n    padding: 12px;\n    border-radius: 24px;\n    @include pc{\n        padding: 24px;\n    }\n  }\n\n  .timeArea{\n    color: $hangout-primary;\n    font-size: 8px;\n    @include pc{\n        font-size: 12px;\n    }\n  }\n  \n</style>","import { render } from \"./ChatRoomTarget.vue?vue&type=template&id=b2a97c28&scoped=true\"\nimport script from \"./ChatRoomTarget.vue?vue&type=script&lang=js\"\nexport * from \"./ChatRoomTarget.vue?vue&type=script&lang=js\"\n\nimport \"./ChatRoomTarget.vue?vue&type=style&index=0&id=b2a97c28&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b2a97c28\"]])\n\nexport default __exports__"],"names":["class","ref","style","key","_createElementBlock","_hoisted_1","_Fragment","_renderList","$setup","renderMsgData","item","msgKey","sender","userId","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_toDisplayString","time","_hoisted_5","msg","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","setup","chatRoom","chatRoomStore","targetId","storeToRefs","getTargetRoomMsg","getTargetInfo","scrollBtmContainer","scrollToBottom","value","scrollTop","scrollHeight","scrollToBottomAgain","watch","onMounted","localStorage","getItem","getCurrentInstance","proxy","$route","query","__exports__","render"],"sourceRoot":""}